<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Urla Sayfiye Evi – Rakı Balık</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Allura&family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap" rel="stylesheet" />

  <style>
    /* =========================
       TEMA DEĞİŞKENLERİ (MAVİ PALET)
       ========================= */
    :root{
      /* Mavi Gece + Eskitme Altın + Kemik Beyazı */
      --bg-dark: #0a1014;
      --bg-dark-accent: #101820;
      --overlay: rgba(10,16,20,.45);

      --text: #e0d8cc;
      --muted: #a0988d;
      --text-dark: #1c1812;
      --text-dark-muted: #52483a;
      --gold: #c5a878;

      --beige: #f5f2ed; /* Açık zemin */
      --rule-color: rgba(197,168,120,.40);
      --rule: var(--rule-color);

      /* Tipografi */
      --font-display:'Allura', cursive;
      --font-head:'Cormorant Garamond', serif;
      --font-body:'Cormorant Garamond', serif, -apple-system, Segoe UI, Arial, sans-serif;
      --fs-body:18px;
      --lh-body:1.75;
      --fs-h1:clamp(60px, 9vw, 140px);
      --fs-h2:clamp(32px, 4vw, 52px);
      --fs-h3:clamp(20px, 2vw, 28px);

      /* Spacing (8px grid) */
      --s-1:8px; --s-2:12px; --s-3:16px; --s-4:24px; --s-5:32px; --s-6:48px; --s-7:64px; --s-8:96px;

      /* Diğer */
      --radius:16px; --ease:cubic-bezier(.22,.61,.36,1);
      --dur:.9s; --dur-slow:1.2s; --maxw:1200px;
    }

    /* = RESET + TİPO = */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%;scroll-behavior:smooth}
    body{
      margin:0;
      background:var(--bg-dark);
      color:var(--text);
      font:400 var(--fs-body)/var(--lh-body) var(--font-body);
      cursor: default;
    }
    /* Preloader akışı için: yüklenirken kaydırma kapalı */
    body.loading { overflow: hidden; }

    img{max-width:100%;display:block;border:0}
    a{color:inherit;text-decoration:none}
    p{font-style: italic; margin:0}

    /* Başlık aileleri */
    .display{font-family:var(--font-display); font-weight:400; letter-spacing:.01em; line-height:1.02}
    .h2{font:600 var(--fs-h2) var(--font-head); margin:0; text-transform:uppercase; letter-spacing:.05em}
    .h3{font:600 var(--fs-h3) var(--font-head); margin:0; text-transform:uppercase; letter-spacing:.05em}
    .serif-title{font:600 var(--fs-h2) var(--font-head); margin:0; text-transform:uppercase; letter-spacing:.05em}

    /* İçerik sarmalayıcı */
    .band{width:100%; position:relative; overflow-x:hidden;}
    .wrap{max-width:var(--maxw); margin:0 auto; padding:var(--s-8) var(--s-3)}
    [id]{scroll-margin-top:90px}

    /* ===== RAKI DOLUM ANİMASYONU (PRELOADER) ===== */
    .preloader {
      position: fixed;
      inset: 0;
      background-color: var(--bg-dark);
      z-index: 9999;
      display: grid;
      place-items: center;
      transition: opacity .8s var(--ease), visibility .8s var(--ease);
    }
    .preloader.loaded {
      opacity: 0;
      visibility: hidden;
    }
    .raki-glass-container {
      position: relative;
      width: 150px;
      text-align: center;
    }
    .raki-glass-svg {
      width: 100%;
      height: auto;
      overflow: visible;
    }
    .raki-glass-svg .glass-shape {
      fill: rgba(255, 255, 255, 0.05);
      stroke: rgba(224, 216, 204, 0.3);
      stroke-width: 2;
    }
    .raki-glass-svg .aslan-sutu {
      fill: #fff;
      clip-path: inset(100% 0 0 0);
      animation: fill-raki 4s var(--ease) 0.5s forwards;
    }
    .preloader-text {
      font-family: var(--font-display);
      font-size: 24px;
      color: var(--muted);
      margin-top: 20px;
      opacity: 0;
      animation: fade-in-text 2s var(--ease) 1.5s forwards;
    }
    @keyframes fill-raki {
      0% { clip-path: inset(100% 0 0 0); }
      80%, 100% { clip-path: inset(25% 0 0 0); }
    }
    @keyframes fade-in-text { to { opacity: 1; } }

    /* ===== DUMAN EFEKTİ CANVAS ===== */
    #smoke-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1500;
      pointer-events: none; /* Canvas'ın tıklamaları engellememesi için */
    }

    /* = NAV = */
    .nav{
      position:fixed; inset:0 0 auto; height:78px; z-index:1000;
      background:linear-gradient(180deg, rgba(10,16,20,.65), rgba(10,16,20,.45));
      -webkit-backdrop-filter:blur(10px) saturate(120%);
      backdrop-filter:blur(10px) saturate(120%);
      border-bottom:1px solid rgba(197,168,120,.12);
      box-shadow:0 20px 60px rgba(0,0,0,.18);
      transition:background .25s, height .25s;
    }
    .nav.scrolled{background:linear-gradient(180deg, rgba(10,16,20,.85), rgba(10,16,20,.65)); height:66px}
    .nav-inner{
      max-width:var(--maxw); margin:0 auto; height:100%;
      display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:var(--s-2); padding:0 var(--s-2);
    }
    .brand{display:flex;align-items:center;gap:10px}
    .brand img{width:34px;height:34px;object-fit:contain;filter:grayscale(.1) sepia(.1) brightness(.95)}
    .brand span{font-family:var(--font-display);font-size:28px;letter-spacing:.01em}
    .menu{justify-self:center;display:flex;align-items:center}
    .links{display:flex;align-items:center;gap:22px;flex-wrap:nowrap}
    .links a{
      position:relative;text-decoration:none;font-size:15px;
      font-family:var(--font-head);letter-spacing:.12em;text-transform:uppercase;padding:10px 2px;
    }
    .links a::after{
      content:""; position:absolute; left:0; bottom:-6px; height:2px; width:0;
      background:var(--gold); transition:width .25s var(--ease);
    }
    .links a:hover::after,.links a.active::after{width:100%}
    .right-controls{justify-self:end;display:flex;align-items:center;gap:14px}
    .right-link{padding:10px 8px;border-radius:8px}
    .right-link:hover{background:rgba(255,255,255,.06)}
    .lang-switch{display:flex;gap:8px;align-items:center}
    .lang-btn{
      border:0;background:transparent;color:var(--muted);padding:8px 10px;border-radius:999px;
      font-family:var(--font-head);letter-spacing:.12em;text-transform:uppercase;cursor:pointer;transition:.2s
    }
    .lang-btn:hover{color:var(--text)}
    .lang-btn.active{color:var(--gold); text-decoration:underline}
    .burger{display:none;width:40px;height:40px;cursor:pointer;position:absolute;right:14px;background:none;border:0}
    .burger span{position:absolute;left:8px;right:8px;height:2px;background:var(--gold);border-radius:2px;transition:.25s}
    .burger span:nth-child(1){top:12px}.burger span:nth-child(2){top:19px}.burger span:nth-child(3){top:26px}
    .mobile-only{display:none}

    @media(max-width:880px){
      .burger{display:block}
      .menu{
        display:none;position:absolute;top:78px;right:0;background:rgba(10,16,20,.96);
        border-bottom:1px solid rgba(197,168,120,.12);padding:16px 120px
      }
      .menu.open{display:block}
      .links{gap:14px;flex-direction:column;align-items:flex-start}
      .right-controls{display:none}
      .mobile-only{display:flex;gap:10px;flex-direction:column;margin-top:8px}
    }

    .scroll-progress { position: fixed; top: 0; left: 0; height: 3px; width: 0; background: linear-gradient(90deg,var(--gold),var(--text)); z-index: 1200; transition: width .1s linear; }

    /* = HERO = */
    .hero{position:relative;height:100vh;min-height:640px;overflow:hidden}
    .hero .bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;
      filter:brightness(.8) contrast(1.05); transform:scale(1.06); will-change: transform, filter;
      transition: filter .4s linear;
    }
    .hero::after{content:"";position:absolute;inset:0;background:var(--overlay)}
    .hero-inner{position:relative;z-index:2;height:100%;display:grid;place-items:center;text-align:center;padding:0 var(--s-2)}
    .hero .display{font-size:var(--fs-h1);color:var(--text);text-shadow:0 5px 25px rgba(0,0,0,.5);opacity:0;animation:fadeInUp var(--dur) var(--ease) .8s forwards}
    .scroll-indicator{position:absolute;bottom:30px;left:50%;transform:translateX(-50%);z-index:10;animation:bounce 2s infinite}
    .scroll-indicator svg{width:30px;height:30px;fill:rgba(224,216,204,.85)}

    /* = ANİMASYONLAR = */
    @keyframes fadeInUp{from{opacity:0;transform:translateY(25px)}to{opacity:1;transform:translateY(0)}}
    @keyframes kenburns{0%{transform:scale(1.02)}100%{transform:scale(1.06)}}
    @keyframes bounce{0%,20%,50%,80%,100%{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}

    /* = GENEL LAYOUT = */
    .btn{
      padding:13px 24px;border:1px solid rgba(197,168,120,.24);color:var(--text);
      letter-spacing:.1em;font-size:14px;background:rgba(197,168,120,.10);
      transition:transform .25s, box-shadow .25s, background .25s;display:inline-block;border-radius:12px;
      position:relative; overflow:hidden;
    }
    .btn:hover{transform:translateY(-2px);background:rgba(197,168,120,.18);box-shadow:0 10px 24px rgba(0,0,0,.25)}
    .btn::after{ content:""; position:absolute; top:0; left:-150%; width:120%; height:100%; transform:skewX(-18deg); background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent); }
    .btn:hover::after{ animation: shimmer 1.2s ease; }
    @keyframes shimmer { to { left: 150%; } }

    .rule{width:80px;height:2px;background:var(--rule);margin:var(--s-2) 0 var(--s-3)}
    .rule-dark{width:80px;height:2px;background:var(--text-dark);margin:var(--s-2) 0 var(--s-3)}
    .muted{color:var(--muted)}

    .two-col{display:grid;grid-template-columns:1fr 1fr;gap:var(--s-6);align-items:center}
    .two-col.reversed > :first-child { grid-column: 2; grid-row: 1; }
    .two-col.reversed > :last-child { grid-column: 1; grid-row: 1; }
    .img-cover{width:100%;height:auto;border-radius:var(--radius)}
    .text p + p{margin-top:var(--s-3)}

    /* Scroll reveal */
    .reveal{opacity:0;transform:translateY(30px);transition:opacity var(--dur) var(--ease),transform var(--dur) var(--ease)}
    .reveal.in-view{opacity:1;transform:none}
    [data-reveal="slide-right"]{transform:translateX(-30px)}
    [data-reveal="slide-left"]{transform:translateX(30px)}
    .reveal-img{overflow:hidden}
    .reveal-img.in-view img{transform:scale(1)}
    .reveal-img img{border-radius:var(--radius);transform:scale(1.05);transition:transform var(--dur-slow) var(--ease)}

    /* Alıntı */
    .quote-full{position:relative;min-height:40vh;display:grid;place-items:center;overflow:hidden;padding:var(--s-7) var(--s-3)}
    .quote-full .bg{position:absolute;inset:0;z-index:0;overflow:hidden}
    .quote-full .bg img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:brightness(.75) contrast(1.05)}
    .quote-full::after{content:"";position:absolute;inset:0;z-index:1;background:
      radial-gradient(60% 60% at 50% 50%,rgba(0,0,0,.25) 0%,rgba(0,0,0,.55) 55%,rgba(0,0,0,.65) 100%),var(--overlay)}
    .quote-full .content{position:relative;z-index:2;text-align:center;padding:0 24px;max-width:1100px}
    .quote-full .q{font-style:italic;font-weight:400;font-size:clamp(24px,4.2vw,46px);line-height:1.25;color:#fff;text-shadow:0 2px 18px rgba(0,0,0,.45)}

    /* Tema varyantları */
    .bg-beige{background:var(--beige);color:var(--text-dark)}
    .bg-beige .muted{color:var(--text-dark-muted)}
    .bg-beige .btn{color:var(--text-dark);background:rgba(0,0,0,.06)}
    .bg-beige .btn:hover{background:rgba(0,0,0,.12)}
    .bg-dark{background:var(--bg-dark);color:var(--text)}
    .bg-dark .muted{color:var(--muted)}

    /* Menü kartları */
    .new-menu{padding-top:0;padding-bottom:0}
    .three-card-grid{display:flex;justify-content:center;gap:32px;padding:var(--s-8) var(--s-3);flex-wrap:wrap}
    .menu-card{position:relative;width:330px;max-width:90vw;height:480px;border-radius:12px;overflow:hidden;box-shadow:0 10px 36px rgba(0,0,0,.15);transition:transform .3s var(--ease), box-shadow .3s var(--ease); transform: translateY(0) perspective(800px) rotateX(0) rotateY(0); transform-style: preserve-3d;}
    .menu-card:hover{transform:translateY(-8px);box-shadow:0 16px 48px rgba(0,0,0,.25)}
    .menu-card a{text-decoration:none}
    .card-image-wrap{position:absolute;inset:0}
    .card-image-wrap img{width:100%;height:100%;object-fit:cover;transition:transform .6s var(--ease),filter .4s var(--ease)}
    .menu-card:hover .card-image-wrap img{transform:scale(1.05);filter:brightness(.7) saturate(1.1)}
    .menu-card::after{content:"";position:absolute;inset:0;background:rgba(0,0,0,.1);transition:background .4s var(--ease)}
    .menu-card:hover::after{background:linear-gradient(180deg, transparent 50%, rgba(0,0,0,.7))}
    .menu-card::before{ content:""; position:absolute; inset:-1px; border-radius:12px; background: radial-gradient(120px 80px at var(--mx,50%) var(--my,50%), rgba(255,255,255,.18), transparent 60%); opacity:0; transition: opacity .4s var(--ease); pointer-events:none; }
    .menu-card:hover::before{ opacity:1 }
    .card-content{position:absolute;bottom:0;left:0;right:0;padding:24px;text-align:center;z-index:2}
    .card-content h3{color:#e0d8cc;text-shadow:0 2px 4px rgba(0,0,0,.4);transform:translateY(20px);opacity:0;transition:transform .5s var(--ease) .1s,opacity .5s var(--ease) .1s}
    .menu-card:hover .card-content h3{transform:translateY(0);opacity:1}

    /* SSS */
    .faq{max-width:1000px;margin:0 auto;padding:var(--s-8) var(--s-3)}
    .faq details{background:rgba(0,0,0,.18);border:1px solid rgba(197,168,120,.18);border-radius:12px;margin:10px 0;overflow:hidden;transition: background .2s}
    .faq details[open]{background:rgba(0,0,0,.24);border-color:rgba(197,168,120,.25)}
    .faq summary{list-style:none;cursor:pointer;display:flex;align-items:center;gap:10px;padding:14px 18px;font-family:var(--font-head);letter-spacing:.12em;text-transform:uppercase;position:relative}
    .faq summary::-webkit-details-marker{display:none}
    .faq summary::after{content:"";width:10px;height:10px;border-right:2px solid currentColor;border-bottom:2px solid currentColor;transform:rotate(-45deg);position:absolute;right:18px;transition:transform .25s var(--ease)}
    .faq details[open] summary::after{ transform: rotate(45deg) !important; }
    .answer{padding:0 18px 14px;color:var(--muted)}
    .answer p { margin-left: 1rem; }

    /* İletişim + Harita */
    .contact{background:var(--bg-dark-accent);border-top:1px solid rgba(197,168,120,.12)}
    .contact-grid{max-width:var(--maxw);margin:0 auto;display:grid;grid-template-columns:1.2fr 1fr;gap:32px;align-items:center;padding:64px 24px}
    .map-frame{border-radius:12px;overflow:hidden;background:#0f0f0f;border:1px solid rgba(197,168,120,.12);box-shadow:0 10px 40px rgba(0,0,0,.35);height:340px}
    .map-frame iframe{width:100%;height:100%;border:0;display:block;filter:grayscale(.2) contrast(1.05) brightness(.95)}
    .route-buttons{display:flex;flex-wrap: wrap; gap:10px;margin-top:12px}
    .route-buttons a{display:inline-block;padding:8px 12px;border-radius:8px;border:1px solid rgba(197,168,120,.24);color:var(--text);background:rgba(197,168,120,.10);font-size:13px; transition: background .2s;}
    .route-buttons a:hover{background:rgba(197,168,120,.18)}
    
    /* ===== REZERVASYON FORMU STİLLERİ ===== */
    form{ display:grid; gap:12px }
    form input, form button {
      padding:13px;
      background:#101820;
      border:1px solid rgba(197,168,120,.24);
      color: var(--text);
      border-radius:10px;
      font-family: var(--font-body);
      font-size: 16px;
      transition: border-color .2s, box-shadow .2s;
    }
    form input:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 10px rgba(197, 168, 120, .25);
    }
    form input[type="date"], form input[type="time"] { color-scheme: dark; }

    /* =========================
       POLAROID SCROLL STACK
       ========================= */
    #scrolly-stack {
      --card-width: min(72vw, 480px);
      --card-height: 58vh;
      position: relative;
      color: #333;
      background: var(--beige);
      overflow: visible !important; /* DÜZELTME: Bu satır sticky'nin çalışmasını sağlar */
    }
    .scrolly-stage {
      height: 100vh;
      position: sticky;
      top: 0;
      display: grid;
      place-items: center;
      overflow: hidden;
    }
    .polaroid {
      position: absolute;
      width: var(--card-width);
      background: #fff;
      padding: 16px 16px 80px 16px;
      border-radius: 4px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      border: 1px solid #ddd;
      border-bottom: 20px solid #fff;
      transform-origin: center center;
      will-change: transform;
    }
    .polaroid img {
      width: 100%;
      height: var(--card-height);
      object-fit: cover;
    }
    .polaroid figcaption {
      position: absolute;
      bottom: 20px;
      left: 20px;
      right: 20px;
      font-family: var(--font-display);
      font-size: 28px;
      color: #333;
      text-align: center;
    }

    /* RESPONSIVE */
    @media(max-width:992px){
      .two-col, .two-col.reversed {grid-template-columns:1fr}
      .two-col.reversed > :first-child, .two-col.reversed > :last-child { grid-column: 1; }
      .two-col > :first-child { order: 1; }
      .two-col > :last-child { order: 2; }
      .two-col.reversed > :first-child { order: 1; }
      .two-col.reversed > :last-child { order: 2; }
      .contact-grid{grid-template-columns:1fr;gap:22px;padding:48px 20px}
      .map-frame{height:300px}
    }

    /* A11Y / Motion */
    @media(prefers-reduced-motion:reduce){
      *{animation:none!important;transition:none!important}
      .reveal{opacity:1!important;transform:none!important;filter:none!important}
      .preloader { display: none !important; }
      body.loading { overflow: auto !important; }
    }
    :focus-visible{outline:2px dashed var(--gold);outline-offset:3px;border-radius:8px}

    /* GPU compositing ipucu */
    .menu-card:hover, .btn:hover, .links a:hover { will-change: transform, opacity; }
  </style>
</head>
<body class="loading">

  <div class="preloader" id="preloader" aria-hidden="true">
    <div class="raki-glass-container">
      <svg class="raki-glass-svg" viewBox="0 0 100 200" aria-hidden="true">
        <defs>
          <clipPath id="glass-clip">
            <path d="M10 0 L0 200 H100 L90 0 Z" />
          </clipPath>
        </defs>
        <g clip-path="url(#glass-clip)">
          <rect x="0" y="0" width="100" height="200" class="aslan-sutu" />
        </g>
        <path class="glass-shape" d="M10 0 L0 200 H100 L90 0 Z" />
      </svg>
      <div class="preloader-text">Kıvamını buluyor...</div>
    </div>
  </div>

  <canvas id="smoke-canvas"></canvas>

  <main id="main-content" style="visibility:hidden; opacity:0;">
    <nav class="nav" id="nav" role="navigation" aria-label="Ana menü">
        <div class="nav-inner">
          <a class="brand" href="#home" aria-label="Sayfiye Evi ana sayfa">
            <img src="assets/images/balik.png" alt="" id="brandLogo" />
            <span>Sayfiye Evi</span>
          </a>
    
          <div class="menu" id="menuPanel">
            <div class="links" id="links">
              <a href="#home" data-i18n="nav_home">HOME</a>
              <a href="#menu" data-i18n="nav_menu">MENU</a>
              <a href="#scrolly-stack" data-i18n="nav_fahri">FAHRI BABA</a>
              <a href="#raki-icmek" data-i18n="nav_raki">RAKI</a>
              <a href="#order" data-i18n="nav_order">REZERVASYON</a>
              <a href="#contact" data-i18n="nav_contact">ILETISIM</a>
    
              <div class="mobile-only">
                <a class="right-link" href="#sss" data-i18n="nav_faq">SSS</a>
                <div class="lang-switch">
                  <button class="lang-btn" data-lang="tr" type="button">TR</button>
                  <button class="lang-btn" data-lang="en" type="button">EN</button>
                </div>
              </div>
            </div>
          </div>
    
          <div class="right-controls">
            <a class="right-link" href="#sss" data-i18n="nav_faq">SSS</a>
            <div class="lang-switch" aria-label="Dil seçimi">
              <button class="lang-btn" data-lang="tr" type="button">TR</button>
              <button class="lang-btn" data-lang="en" type="button">EN</button>
            </div>
          </div>
    
          <button class="burger" id="burger" aria-label="Menüyü aç/kapat" aria-expanded="false" aria-controls="menuPanel" type="button">
            <span></span><span></span><span></span>
          </button>
        </div>
    </nav>
    <div class="scroll-progress" id="scrollProgress" aria-hidden="true"></div>

    <header id="home" class="hero" role="banner">
        <img class="bg" src="assets/images/manzara.png" alt="Rakı balık sofrası" decoding="async" />
        <div class="hero-inner">
            <h1 class="display" data-i18n="hero_title">Sayfiye Evi</h1>
        </div>
        <div class="scroll-indicator" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 16.586l-4.293-4.293a1 1 0 011.414-1.414L12 14.172l4.879-4.879a1 1 0 011.414 1.414L13.414 16.586a1 1 0 01-1.414 0z"/></svg>
        </div>
    </header>

    <section id="about" class="band bg-beige">
        <div class="wrap two-col">
            <div class="reveal reveal-img" data-reveal="slide-right">
                <img class="img-cover" src="assets/images/raki.png" alt="Meze ve balık tabağı" loading="lazy" decoding="async" />
            </div>
            <div class="reveal text" data-reveal="slide-left">
                <h2 class="serif-title" data-i18n="about_title">Urla'nın Kalbinde Bir Nefes</h2>
                <div class="rule-dark" aria-hidden="true"></div>
                <p class="muted" data-i18n="about_p">
Sayfiye Evi, sadece bir mekân değil; Ege’nin ritmini taşıyan bir yaşam biçimidir. Yazın ilk akşamlarında, denizden esen ılık rüzgâr masanın üzerine serili keten örtüyü hafifçe dalgalandırırken, taş duvarların serinliği yüzyılların hikâyesini fısıldar. İçeriden bakır tavalarda otların tıslayan sesi gelir; dışarıda dalgalar kıyıya usul usul vurarak sanki sofraya tempo tutar.

Kapıdan içeri adım atar atmaz yüzüne çarpan koku zeytinyağıdır—taze, parlak ve berrak. Zeytin ağaçlarının gölgesinde kurulan masalar, “yavaşla” der; burada zaman, güneşin turuncuya döndüğü bir akşamüstünün ritmine uyar. İlk tabak gelir: denizden yeni çekilmiş balık, yanına limon kabuğu kadar sade, Ege otu kadar derin. Kadehler hafifçe tokuşur; çınlayan o ses, daha önce burada yaşanmış sohbetlere karışır, yeni bir anıya dönmeye hazırlanır.

Komşu masadan yükselen kahkaha, rüzgârla birlikte senin masana uğrar. Garson, “bunu bugün sabah kayalıkların dibinden aldık” derken gözlerinde gurur vardır; çünkü burada her tabak, sadece doymak için değil, iyi yaşamanın küçük bir ritüeli olsun diye hazırlanır. Gün batımı kıyıyı kızıla boyadığında taş duvarlar ısısını geri verir; sohbet derinleşir, denizin sesi bir perde gibi masanın etrafına kapanır.

Bizim için Sayfiye, bir yemeğin ötesinde; dostlarla paylaşılan bir kahkaha, kadehlerde çınlayan bir anı ve denize karşı kurulan bir hayaldir. Her geliş, bir öncekinin üzerine yazılan yeni bir satır; her gidiş, “yine görüşürüz” diyen bir sahnedir. Sayfiye Evi, Ege’nin ruhunu taşıyan bir sığınak; huzurun, doğanın ve lezzetin aynı sofrada buluştuğu o tanıdık ev hissidir.                </p>
            </div>
        </div>
    </section>

    <section id="meze" class="band bg-dark">
      <div class="wrap two-col reversed">
        <div class="reveal reveal-img" data-reveal="slide-left">
          <img class="img-cover" src="assets/images/meze-3.png" alt="Zengin meze çeşitleri" loading="lazy" decoding="async" />
        </div>
        <div class="reveal text" data-reveal="slide-right">
          <h2 class="serif-title">Rezervasyon Yap</h2>
          <div class="rule" aria-hidden="true"></div>
          <p class="muted">
            Bizim için meze, sofranın açılış serenadıdır. Urla'nın bereketli topraklarından toplanan taptaze otlar, en saf zeytinyağıyla buluşur. Her biri, kendi hikayesini fısıldayan küçük lezzet tabaklarıdır. Bir kaşık atomun acısı, bir çatal Girit ezmesinin ferahlığı... Mezeler, rakının en sadık yoldaşı, sohbetin ise en lezzetli bahanesidir.
          </p>
          <div class="button">asd</div>
        </div>
      </div>
    </section>

    <section id="arasicak" class="band bg-beige">
      <div class="wrap two-col">
        <div class="reveal reveal-img" data-reveal="slide-right">
          <img class="img-cover" src="assets/images/meze-3.png" alt="Izgara ahtapot" loading="lazy" decoding="async" />
        </div>
        <div class="reveal text" data-reveal="slide-left">
          <h2 class="serif-title">Meze Sanatı</h2>
          <div class="rule-dark" aria-hidden="true"></div>
          <p class="muted">
            Soğuk mezelerin ardından masaya gelen bir yaprak ciğer veya güveçte tereyağlı karides, sohbetin ateşini harlar. Ara sıcaklarımız, denizin cömertliğini ve Ege mutfağının sıcaklığını bir araya getirir. Her lokma, masadaki kahkahaları daha da artırmak, anıları daha da ısıtmak içindir.
          </p>
        </div>
      </div>
    </section>

    <section id="anayemek" class="band bg-dark">
      <div class="wrap two-col reversed">
        <div class="reveal reveal-img" data-reveal="slide-left">
          <img class="img-cover" src="assets/images/fahri-baba-bardak.png" alt="Izgara balık" loading="lazy" decoding="async" />
        </div>
        <div class="reveal text" data-reveal="slide-right">
          <h2 class="serif-title">Denizden Sofraya</h2>
          <div class="rule" aria-hidden="true"></div>
          <p class="muted">
            Günün sonunda, denizin bize sunduğu en değerli hazine sofraya gelir. Balıkçılarımızın ağından çıkan, mevsimin en taze balıkları, usta ellerde, kömür ateşinin üzerinde usulca pişirilir. Sadeliğin içindeki o mükemmel lezzet, Ege'nin tuzlu sularından gelen bir armağandır. Her balık, denizle aramızdaki o kopmaz bağın bir kanıtıdır.
          </p>
        </div>
      </div>
    </section>

    <section class="quote-full" aria-label="Söz">
      <div class="bg" aria-hidden="true"><img src="assets/images/masa-2.png" alt="" loading="lazy" decoding="async" /></div>
      <div class="content reveal" data-reveal="fade-up">
        <div class="q" data-i18n="quote1">“Dost meclisinde rakı, deniz sesiyle kıvam bulur.”</div>
      </div>
    </section>

  <section id="scrolly-stack" class="band">
    <div class="scrolly-stage">
      <figure class="polaroid">
        <img src="assets/images/raki.jpg" alt="Fahri Baba portresi">
        <figcaption>“Rakı aceleye gelmez evlat.”</figcaption>
      </figure>
      <figure class="polaroid">
        <img src="assets/images/meze-3.png" alt="Urla'da deniz kenarı">
        <figcaption>“Önce meze, sonra laf...”</figcaption>
      </figure>
      <figure class="polaroid">
        <img src="assets/images/meze-4.png" alt="Balıkçı teknesi">
        <figcaption>“Dalgalar konuşur, biz tercüme ederiz.”</figcaption>
      </figure>
      <figure class="polaroid">
        <img src="assets/images/raki.png" alt="Rakı kadehi">
        <figcaption>“Sadece göz göze bir tebessüm...”</figcaption>
      </figure>
            <figure class="polaroid">
        <img src="assets/images/bar.png" alt="Rakı kadehi">
        <figcaption>“Sadece göz göze bir tebessüm...”</figcaption>
      </figure>
    </div>
  </section>


    <section class="quote-full" aria-label="Söz">
      <div class="bg" aria-hidden="true"><img src="assets/images/bina-cizim-2.png" alt="Urla gün batımı" loading="lazy" decoding="async"/></div>
      <div class="content reveal" data-reveal="fade-up">
        <div class="q" data-i18n="quote2">“Sayfiye’de masalar sadece yemeklerle değil, anılarla da doluyor.”</div>
      </div>
    </section>

    <section id="menu" class="band bg-beige new-menu" aria-label="Menü kısayolları">
      <div class="wrap three-card-grid">
        <div class="menu-card reveal" data-reveal="fade-up">
          <a href="#menu-details">
            <div class="card-image-wrap"><img src="assets/images/ev.png" alt="Mezeler" loading="lazy" decoding="async"/></div>
            <div class="card-content"><h3 class="h3" data-i18n="card_menu">Menü</h3></div>
          </a>
        </div>
        <div class="menu-card reveal" data-reveal="fade-up">
          <a href="#about">
            <div class="card-image-wrap"><img src="assets/images/manzara.png" alt="Deniz mahsulleri" loading="lazy" decoding="async"/></div>
            <div class="card-content"><h3 class="h3" data-i18n="card_discover">Keşfet</h3></div>
          </a>
        </div>
        <div class="menu-card reveal" data-reveal="fade-up">
          <a href="#order">
            <div class="card-image-wrap"><img src="assets/images/fahri-baba-bardak.png" alt="Rakı sofrası" loading="lazy" decoding="async"/></div>
            <div class="card-content"><h3 class="h3" data-i18n="card_res">Rezervasyon</h3></div>
          </a>
        </div>
      </div>
    </section>

    <section id="order" class="band bg-dark" aria-label="Rezervasyon">
      <div class="wrap two-col">
        <div class="reveal text" data-reveal="slide-right">
          <h2 class="serif-title" data-i18n="order_title">Rezervasyon</h2>
          <div class="rule" aria-hidden="true"></div>
          <p class="muted" data-i18n="order_p1">Telefonla: <strong>0 (232) 000 00 00</strong><br>WhatsApp için sağ alttaki “İletişim!” butonuna tıkla.</p>
          <p class="muted" data-i18n="order_p2">Hafta içi 17:00–23:30 • Hafta sonu 16:00–01:00</p>
        </div>
        <div class="reveal" data-reveal="slide-left">
          <form id="resForm">
            <input required data-i18n-ph="ph_name" name="name" placeholder="Ad Soyad" />
            <input required data-i18n-ph="ph_phone" name="phone" type="tel" placeholder="Telefon" />
            <input required data-i18n-ph="ph_date" name="date" type="date" />
            <input required data-i18n-ph="ph_time" name="time" type="time" />
            <input required data-i18n-ph="ph_people" name="people" type="number" min="1" max="20" value="2" placeholder="Kişi sayısı" />
            <button class="btn" type="submit" data-i18n="btn_send">GÖNDER</button>
          </form>
        </div>
      </div>
    </section>

    <section id="sss" class="band bg-beige" aria-label="Sıkça Sorulan Sorular">
      <div class="faq">
        <h2 class="h2" data-i18n="faq_title">Sıkça Sorulan Sorular</h2>
        <div class="rule-dark" aria-hidden="true"></div>

        <details>
          <summary data-i18n="q1">Otopark var mı?</summary>
          <div class="answer"><p class="muted" data-i18n="a1">-Evet, akşam saatlerinde ücretsiz otopark alanı bulunur. Dolulukta vale yardımcı olur.</p></div>
        </details>

        <details>
          <summary data-i18n="q2">Vejetaryen/vegan seçenekler mevcut mu?</summary>
          <div class="answer"><p class="muted" data-i18n="a2">-Zeytinyağlılar ve salatalar yanında günlük vegan/vejetaryen alternatiflerimiz var.</p></div>
        </details>

        <details>
          <summary data-i18n="q3">Canlı müzik hangi günler?</summary>
          <div class="answer"><p class="muted" data-i18n="a3">-Cuma ve Cumartesi geceleri. Özel günlerde Instagram’dan duyuruyoruz.</p></div>
        </details>
      </div>
    </section>

    <footer id="contact" class="contact band">
      <div class="contact-grid">
        <div>
          <div class="map-frame reveal" data-reveal="fade-up">
            <iframe title="Sayfiye Evi Konum" loading="lazy" allowfullscreen
                    referrerpolicy="no-referrer-when-downgrade"
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3129.479599554203!2d26.7729668763592!3d38.33784347180058!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14bb9f18e6981881%3A0x44c9b8377a66da8!2sUrla%2C%20%C4%B0zmir!5e0!3m2!1str!2str!4v1692711090815!5m2!1str!2str"></iframe>
          </div>
          <div class="route-buttons">
            <a target="_blank" rel="noopener" href="https://www.google.com/maps/dir//Urla" data-i18n="route_google">Google Rota</a>
            <a target="_blank" rel="noopener" href="https://maps.apple.com/?daddr=Urla%2C%20%C4%B0zmir" data-i18n="route_apple">Apple Rota</a>
          </div>
        </div>
        <div class="reveal" data-reveal="slide-left">
          <div>
            <h3 class="h3">İletişim</h3>
            <div class="rule" style="margin: var(--s-2) 0;"></div>
            <p data-i18n="contact_addr" style="margin-bottom: var(--s-2);">📍 İskele Mah., Urla / İzmir</p>
            <p style="margin-bottom: var(--s-2);"><a href="mailto:info@sayfiyeevi.com">📧 info@sayfiyeevi.com</a></p>
            <p data-i18n="contact_phone">☎ 0 (232) 000 00 00</p>
          </div>
          <div class="route-buttons" style="margin-top: var(--s-4);">
            <a href="tel:+902320000000" data-i18n="call">Telefon Et</a>
            <a href="mailto:info@sayfiyeevi.com" data-i18n="email">E-posta Gönder</a>
            <a target="_blank" rel="noopener" href="https://wa.me/905551112233" data-i18n="whatsapp">WhatsApp</a>
          </div>
        </div>
      </div>
    </footer>

    <div class="chat" style="position:fixed;right:24px;bottom:24px;z-index:1000">
      <a href="https://wa.me/905551112233" target="_blank" rel="noopener"
         style="background:#1c1c1c;border:1px solid rgba(197,168,120,.24);padding:14px 18px;border-radius:10px;color:#e0d8cc;text-decoration:none"
         data-i18n="chat_btn">İletişim!</a>
    </div>
  </main>

  <script>
  (() => {
    'use strict';

    // ===== Preloader Mantığı =====
    const preloader = document.getElementById('preloader');
    const mainContent = document.getElementById('main-content');
    
    window.addEventListener('load', () => {
        setTimeout(() => {
            if (preloader) {
                preloader.classList.add('loaded');
            }
            if(mainContent) {
                mainContent.style.visibility = 'visible';
                mainContent.style.opacity = 1;
                mainContent.style.transition = 'opacity 1s ease';
            }
            document.body.classList.remove('loading');
            
            if (preloader) {
                preloader.addEventListener('transitionend', () => {
                    preloader.style.display = 'none';
                });
            }
        }, 4500); // SVG dolum + yazı fade ile senkron
    });

    // ===== DOM Referansları ve Değişkenler =====
    const nav          = document.getElementById('nav');
    const burger       = document.getElementById('burger');
    const menuPanel    = document.getElementById('menuPanel');
    const links        = Array.from(document.querySelectorAll('.links a[href^="#"]'));
    const sections     = links.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);
    const langButtons  = document.querySelectorAll('.lang-btn');
    const brandLogo    = document.getElementById('brandLogo');
    const resForm      = document.getElementById('resForm');
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    // ===== Temel Fonksiyonlar =====
    if (brandLogo) { brandLogo.addEventListener('error', () => { brandLogo.style.display = 'none'; }); }

    if (burger && menuPanel) {
      burger.addEventListener('click', () => {
        const isOpen = menuPanel.classList.toggle('open');
        burger.setAttribute('aria-expanded', String(isOpen));
      }, { passive: true });
    }

    const onScrollNav = () => nav && nav.classList.toggle('scrolled', window.scrollY > 10);
    window.addEventListener('scroll', onScrollNav, { passive: true });
    onScrollNav();

    const bar = document.getElementById('scrollProgress');
    const setBar = () => {
      if (!bar) return;
      const h = document.documentElement;
      const scrolled = h.scrollTop / (h.scrollHeight - h.clientHeight);
      bar.style.width = `${(scrolled * 100).toFixed(2)}%`;
    };
    window.addEventListener('scroll', setBar, { passive: true });
    setBar();

    // ===== Scroll Reveal (IO ile) =====
    const revealEls = document.querySelectorAll('.reveal, .reveal-img');
    if (!prefersReducedMotion && 'IntersectionObserver' in window) {
        // Aynı wrap içindeki öğelere kademeli gecikme
        const parentGroups = new Map();
        revealEls.forEach(el => {
            const p = el.parentElement; if (!p) return;
            if (!parentGroups.has(p)) parentGroups.set(p, []);
            parentGroups.get(p).push(el);
        });
        parentGroups.forEach(group => group.forEach((el, i) => { if (!el.dataset.delay) el.dataset.delay = String(i * 100); }));

        const io = new IntersectionObserver(entries => {
            entries.forEach(e => {
                if (e.isIntersecting) {
                    const el = e.target;
                    const d = parseInt(el.dataset.delay || '0', 10);
                    el.style.transitionDelay = `${d}ms`;
                    el.classList.add('in-view');
                    io.unobserve(el);
                }
            });
        }, { threshold: .1, rootMargin: '0px 0px -10% 0px' });
        revealEls.forEach(el => io.observe(el));
    } else {
        revealEls.forEach(el => el.classList.add('in-view'));
    }

    // ===== Section Spy (Aktif Link) =====
    if ('IntersectionObserver' in window && sections.length) {
      const spy = new IntersectionObserver(entries => {
        entries.forEach(({ target, isIntersecting }) => {
          if (isIntersecting) {
            const id = `#${target.id}`;
            links.forEach(l => l.classList.toggle('active', l.getAttribute('href') === id));
          }
        });
      }, { rootMargin: '-40% 0px -55% 0px', threshold: 0.01 });
      sections.forEach(s => spy.observe(s));
    }

    // ===== i18n (Uluslararasılaştırma) =====
    const i18n = {
      tr:{
        nav_home:"ANA SAYFA",nav_menu:"MENÜ",nav_fahri:"FAHRİ BABA",nav_raki:"RAKI",nav_order:"REZERVASYON",nav_contact:"İLETİŞİM",nav_faq:"SSS",
        hero_title:"Sayfiye Evi",
        about_title:"Urla'nın Kalbinde Bir Nefes",
        about_p:"Sayfiye Evi, sadece bir mekân değil; Ege’nin ritmini taşıyan bir yaşam biçimidir. Yazın ilk akşamlarında, denizden esen ılık rüzgâr masanın üzerine serili keten örtüyü hafifçe dalgalandırırken, taş duvarların serinliği yüzyılların hikâyesini fısıldar. İçeriden bakır tavalarda otların tıslayan sesi gelir; dışarıda dalgalar kıyıya usul usul vurarak sanki sofraya tempo tutar. Kapıdan içeri adım atar atmaz yüzüne çarpan koku zeytinyağıdır—taze, parlak ve berrak. Zeytin ağaçlarının gölgesinde kurulan masalar, “yavaşla” der; burada zaman, güneşin turuncuya döndüğü bir akşamüstünün ritmine uyar. İlk tabak gelir: denizden yeni çekilmiş balık, yanına limon kabuğu kadar sade, Ege otu kadar derin. Kadehler hafifçe tokuşur; çınlayan o ses, daha önce burada yaşanmış sohbetlere karışır, yeni bir anıya dönmeye hazırlanır. Komşu masadan yükselen kahkaha, rüzgârla birlikte senin masana uğrar. Garson, “bunu bugün sabah kayalıkların dibinden aldık” derken gözlerinde gurur vardır; çünkü burada her tabak, sadece doymak için değil, iyi yaşamanın küçük bir ritüeli olsun diye hazırlanır. Gün batımı kıyıyı kızıla boyadığında taş duvarlar ısısını geri verir; sohbet derinleşir, denizin sesi bir perde gibi masanın etrafına kapanır.",
        quote1:"“Dost meclisinde rakı, deniz sesiyle kıvam bulur.”",
        quote2:"“Sayfiye’de masalar sadece yemeklerle değil, anılarla da doluyor.”",
        raki_title:"Sayfiye'de Rakı İçmek mi?",
        raki_p:"Burada rakı, zamanı yavaşlatan bilge bir dost gibidir. Kadehler, aceleyle değil; her yudumun tadına vararak, anasonun buğusunda sohbetin derinliklerine dalarak doldurulur. Tıpkı hayat gibi... Ne kadar sabredersen, o kadar güzelleşir tadı. Rakı masası, zamanın durduğu, anıların tazelendiği ve hikayelerin yeniden anlatıldığı bir buluşma noktasıdır. Bu masa bir adabı, bir kültürü, bir paylaşma sanatını temsil eder. Sadece bir içki içmek için değil, ruhunuzu dinlendirmek ve kalbinizde iz bırakacak anılar biriktirmek için sizi Sayfiye'ye bekliyoruz.",
        card_menu:"Menü",card_discover:"Keşfet",card_res:"Rezervasyon",
        order_title:"Rezervasyon",
        order_p1:"Telefonla: <strong>0 (232) 000 00 00</strong><br>WhatsApp için sağ alttaki “İletişim!” butonuna tıkla.",
        order_p2:"Hafta içi 17:00–23:30 • Hafta sonu 16:00–01:00",
        ph_name:"Ad Soyad",ph_phone:"Telefon",ph_date:"Tarih",ph_time:"Saat",ph_people:"Kişi sayısı",btn_send:"GÖNDER",
        faq_title:"Sıkça Sorulan Sorular",q1:"Otopark var mı?",a1:"-Evet, akşam saatlerinde ücretsiz otopark alanı bulunur. Dolulukta vale yardımcı olur.",
        q2:"Vejetaryen/vegan seçenekler mevcut mu?",a2:"-Zeytinyağlılar ve salatalar yanında günlük vegan/vejetaryen alternatiflerimiz var.",
        q3:"Canlı müzik hangi günler?",a3:"-Cuma ve Cumartesi geceleri. Özel günlerde Instagram’dan duyuruyoruz.",
        route_google:"Google Rota",route_apple:"Apple Rota",
        contact_addr:"📍 İskele Mah., Urla / İzmir",contact_phone:"☎ 0 (232) 000 00 00",
        call:"Telefon Et",email:"E-posta Gönder",whatsapp:"WhatsApp",chat_btn:"İletişim!"
      },
      en:{
        nav_home:"HOME",nav_menu:"MENU",nav_fahri:"FAHRI BABA",nav_raki:"RAKI",nav_order:"RESERVATION",nav_contact:"CONTACT",nav_faq:"FAQ",
        hero_title:"Sayfiye Evi",
        about_title:"A Breath in the Heart of Urla",
        about_p:"Sayfiye Evi is not just a venue; it's a way of life that reflects the spirit of the Aegean. It is a sanctuary where you can feel the scent of iodine from the warm sea breeze, the coolness of ancient stone walls, and the calm melody of waves lapping the shore. Here, every moment is a painting where nature and tranquility intertwine, and time slows down. For us, Sayfiye is more than a meal; it is shared laughter among friends, a memory clinking in glasses, and a dream set against the crimson glow of the sunset over the sea.",
        quote1:"“Among friends, rakı reaches its best with the sound of the sea.”",
        quote2:"“At Sayfiye, tables fill with memories as much as with food.”",
        raki_title:"Having Rakı at Sayfiye?",
        raki_p:"Here, rakı is like a wise friend that slows time. Glasses are filled not in haste but by savoring each sip and diving deep into conversation amidst the anise-scented haze. The rakı table is a meeting point where time stops, memories are refreshed, and stories are told anew. This table represents a code of conduct, a culture, an art of sharing. We invite you to Sayfiye not just for a drink, but to rest your soul and gather memories that will leave a mark on your heart.",
        card_menu:"Menu",card_discover:"Explore",card_res:"Reservation",
        order_title:"Reservation",
        order_p1:"By phone: <strong>+90 (232) 000 00 00</strong><br>For WhatsApp, tap the \"Contact!\" button at the bottom right.",
        order_p2:"Weekdays 17:00–23:30 • Weekends 16:00–01:00",
        ph_name:"Full name",ph_phone:"Phone",ph_date:"Date",ph_time:"Time",ph_people:"Guests",btn_send:"SEND",
        faq_title:"Frequently Asked Questions",q1:"Is there parking?",a1:"-Yes. Free evening parking; valet helps when full.",
        q2:"Vegetarian/vegan options?",a2:"-Alongside olive-oil dishes and salads, we have daily vegan/vegetarian alternatives.",
        q3:"Live music days?",a3:"-Friday & Saturday nights. We announce special days on Instagram.",
        route_google:"Google Directions",route_apple:"Apple Maps",
        contact_addr:"📍 İskele Mah., Urla / İzmir",contact_phone:"☎ +90 (232) 000 00 00",
        call:"Call",email:"Send E-mail",whatsapp:"WhatsApp",chat_btn:"Contact!"
      }
    };
    const getStoredLang = () => localStorage.getItem('lang') || 'tr';
    let currentLang = getStoredLang();
    function applyLang(lang){
      currentLang = lang;
      localStorage.setItem('lang', lang);
      document.documentElement.lang = (lang === 'tr' ? 'tr' : 'en');
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if(i18n[lang] && i18n[lang][key]) el.innerHTML = i18n[lang][key];
      });
      document.querySelectorAll('[data-i18n-ph]').forEach(el => {
        const key = el.getAttribute('data-i18n-ph');
        if(i18n[lang] && i18n[lang][key]) el.placeholder = i18n[lang][key];
      });
      langButtons.forEach(b => b.classList.toggle('active', b.dataset.lang === lang));
    }
    langButtons.forEach(b => b.addEventListener('click', () => applyLang(b.dataset.lang)));
    applyLang(currentLang);

    // ===== Form Yönetimi =====
    if (resForm) {
      resForm.addEventListener('submit', (e) => {
        e.preventDefault();
        alert(currentLang === 'tr'
          ? 'Rezervasyon isteğiniz başarıyla alındı. Sizinle teyit için iletişime geçeceğiz.'
          : 'Your reservation request has been received. We will contact you for confirmation.'
        );
        resForm.reset();
      });
    }

    // ===== Harekete Duyarlı Animasyonlar =====
    if (!prefersReducedMotion) {
      // Hero Parallax
      const heroBg = document.querySelector('.hero .bg');
      const parallax = () => {
        if (!heroBg) return;
        const y = window.scrollY || 0;
        const blurAmount = Math.min(y * 0.01, 5);
        heroBg.style.transform = `translateY(${y * 0.15}px) scale(1.06)`;
        heroBg.style.filter = `brightness(.8) contrast(1.05) blur(${blurAmount}px)`;
      };
      window.addEventListener('scroll', parallax, { passive: true });
      parallax();

      // 3D Kartlar
      document.querySelectorAll('.menu-card').forEach(card=>{
        const r = 12; let raf;
        const onMove = e => {
          const rect = card.getBoundingClientRect();
          const x = (e.clientX - rect.left) / rect.width;
          const y = (e.clientY - rect.top) / rect.height;
          const ry = (x - 0.5) * (r * 2);
          const rx = (0.5 - y) * (r * 1.5);
          card.style.setProperty('--mx', `${x * 100}%`);
          card.style.setProperty('--my', `${y * 100}%`);
          cancelAnimationFrame(raf);
          raf = requestAnimationFrame(()=> { card.style.transform = `perspective(800px) rotateX(${rx}deg) rotateY(${ry}deg) translateY(-8px)`; });
        };
        const reset = () => { card.style.transform = 'perspective(800px) rotateX(0) rotateY(0) translateY(0)'; };
        card.addEventListener('mousemove', onMove, { passive: true });
        card.addEventListener('mouseleave', reset);
      });
    
      // Polaroid Galeri
      // Polaroid Galeri
// Polaroid Galeri
      const scrollyStackModule = () => {
        const section = document.getElementById('scrolly-stack');
        if (!section) return;
        const cards = Array.from(section.querySelectorAll('.polaroid'));
        const numCards = cards.length;
        if (numCards === 0) return;
  
        // Her bir kartın animasyonu için 100vh (1 ekran boyu) kaydırma mesafesi tanıyoruz.
        const scrollPerCard = 100; 
        const totalStackHeight = numCards * scrollPerCard;
        section.style.height = `${totalStackHeight}vh`;

        const onScroll = () => {
          const sectionRect = section.getBoundingClientRect();
          const scrollInParent = -sectionRect.top;
          const sectionHeight = sectionRect.height;
          const viewHeight = window.innerHeight;
          const progress = Math.max(0, Math.min(1, scrollInParent / (sectionHeight - viewHeight)));
  
          cards.forEach((card, i) => {
            const start = i / numCards;
            const end = (i + 1) / numCards;

            // Her kart için hafif farklı bir son dönüş açısı belirleyelim
            const finalRotation = (i - (numCards - 1) / 2) * 4; // Ortadaki kart 0 derece olacak şekilde ayarlar

            // Kartın hangi yönden geleceğini belirleyelim (çiftler soldan, tekler sağdan)
            const initialXDirection = (i % 2 === 0) ? -100 : 100; // vw cinsinden

            let transform = '', zIndex = i;

            if (progress < start) {
              // Henüz sırası gelmemiş kartlar: Ekranın sağında veya solunda beklesin
              transform = `translateX(${initialXDirection}vw) scale(0.8) rotate(0deg)`;
              zIndex = i;
            } else if (progress > end) {
              // Sırası geçmiş ve desteye eklenmiş kartlar: Ortada, son pozisyonunda sabit dursun
              transform = `translateY(0) scale(1) rotate(${finalRotation}deg)`;
              zIndex = i;
            } else {
              // Animasyon sırası gelen aktif kart
              const local = (progress - start) / (end - start); // Bu kartın kendi animasyon ilerlemesi (0'dan 1'e)
              
              // Yanlardan ortaya doğru gelsin
              const currentX = (1 - local) * initialXDirection;
              // Yavaşça büyüsün
              const currentScale = 0.8 + local * 0.2;
              // Son pozisyonundaki dönüş açısına yavaşça dönsün
              const currentRotation = local * finalRotation;
              
              transform = `translateX(${currentX}vw) scale(${currentScale}) rotate(${currentRotation}deg)`;
              zIndex = numCards; // Animasyon sırasında en üste çıksın
            }
            
            card.style.transform = transform;
            card.style.zIndex = zIndex;
          });
        };
        window.addEventListener('scroll', onScroll, { passive: true });
        onScroll();
      };
      scrollyStackModule();

      // Canvas Duman Efekti
      const canvas = document.getElementById('smoke-canvas');
      if (canvas) {
        const ctx = canvas.getContext('2d');
        let particles = [], mouse = { x: null, y: null };
        const setCanvasSize = () => {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        };
        setCanvasSize();
        window.addEventListener('resize', setCanvasSize);
        document.addEventListener('mousemove', e => {
            mouse.x = e.x;
            mouse.y = e.y;
            for (let i = 0; i < 2; i++) { particles.push(new Particle()); }
        });
        class Particle {
          constructor() {
            this.x = mouse.x; this.y = mouse.y;
            this.size = Math.random() * 2 + 1;
            this.speedX = (Math.random() * 2 - 1) * 0.5;
            this.speedY = (Math.random() * 2 - 1) * 0.5;
            this.color = `rgba(197, 168, 120, ${Math.random() * 0.5 + 0.2})`;
            this.life = Math.random() * 100 + 50;
          }
          update() {
            this.x += this.speedX; this.y += this.speedY;
            if (this.size > 0.1) this.size -= 0.03;
            this.life--;
          }
          draw() {
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
          }
        }
        function handleParticles() {
          for (let i = 0; i < particles.length; i++) {
            particles[i].update();
            particles[i].draw();
            if (particles[i].size <= 0.1 || particles[i].life <= 0) {
              particles.splice(i, 1);
              i--;
            }
          }
        }
        function animate() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          handleParticles();
          requestAnimationFrame(animate);
        }
        animate();
      }
    }

  })();
  </script>
</body>
</html>